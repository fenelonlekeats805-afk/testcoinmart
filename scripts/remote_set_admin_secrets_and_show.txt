bash -c 'set -euo pipefail; cd /opt/testcoin; admin_pw=$(openssl rand -hex 12); jwt=$(openssl rand -hex 32); grep -q "^ADMIN_USERNAME=" .env && sed -i "s/^ADMIN_USERNAME=.*/ADMIN_USERNAME=admin/" .env || echo "ADMIN_USERNAME=admin" >> .env; grep -q "^ADMIN_PASSWORD=" .env && sed -i "s/^ADMIN_PASSWORD=.*/ADMIN_PASSWORD=${admin_pw}/" .env || echo "ADMIN_PASSWORD=${admin_pw}" >> .env; grep -q "^ADMIN_JWT_SECRET=" .env && sed -i "s/^ADMIN_JWT_SECRET=.*/ADMIN_JWT_SECRET=${jwt}/" .env || echo "ADMIN_JWT_SECRET=${jwt}" >> .env; printf "ADMIN_USERNAME=admin\nADMIN_PASSWORD=%s\n" "${admin_pw}" > /root/testcoin_admin_credentials.txt; chmod 600 /root/testcoin_admin_credentials.txt; echo admin_secrets_ok'
ls -la /root/testcoin_admin_credentials.txt
head -n 2 /root/testcoin_admin_credentials.txt
grep -n '^ADMIN_PASSWORD=' /opt/testcoin/.env | tail -n 1
grep -n '^ADMIN_JWT_SECRET=' /opt/testcoin/.env | tail -n 1
